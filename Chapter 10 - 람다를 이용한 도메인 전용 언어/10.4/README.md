# 실생활의 자바 8 DSL


앞서 자바로 DSL을 개발하는데 사용할 3가지의 패턴을 살펴보았는데 각각의 장단점을 요약하면 다음과 같다.


### 메서드 체인

```java
Order order = forCustomer("BigBank")
		.buy(80)
        .stock("IBM")
        .on("NYSE")
        .at(125.00)
        .sell(50)
        .stock("GOOGLE")
        .on("NASDAQ")
        .at(375.00)
        .end();
```




> ### 장점
* 메서드 이름이 키워드 인수 역할
* 선택형 파라미터와 잘 동작
* DSL 사용자가 정해진 순서로 메서드를 호출하도록 강제 가능
* 정적 메서드를 최소화 혹은 제외 가능
* 문법적 잡음 최소화


> ### 단점 
* 구현이 장황
* 빌드를 연결을 위한 접착 코드 필요
* 들여쓰기 규칙으로만 도메인 객체 계층 정의


<br>


### 중첩 함수

```java
Order order = order("BigBank",
					buy(80,
                    	stock("IBM", on("NYSE")), at(125.00)),
                    sell(50,
                    	stock("GOOGLE", on("NASDAQ")), at(375.00))
					);
```


> ### 장점
* 구현의 장황함 최소화
* 함수 중첩으로 도메인 객체 계층을 반영

> ### 단점
* 정적 메서드의 사용 빈번
* 이름이 아닌 위치로 인수를 정의
* 선택형 파라미터를 처리할 메서드 오버로딩 필요

<br>

### 람다를 이용한 함수 시퀀싱

```java
Order order = LambdaOrderBuilder.order( o -> {
	o.forCustomer( "BigBank" );
	o.buy( t -> {
		t.quantity( 80 );
		t.price( 125.00 );
		t.stock( s -> {
                s.symbol( "IBM" );
                s.market( "NYSE" );
            } );
        });
        o.sell( t -> {
            t.quantity( 50 );
		    t.price( 375.00 );
	        t.stock( s -> {
                s.symbol( "GOOGLE" );
                s.market( "NASDAQ" );
			});
		});
	});
```

> ### 장점
* 선택형 파라미터와 잘 동작
* 정적 메서드 최소화 혹은 제외 가능
* 람다 중첩으로 도메인 객체 계층을 반영
* 빌더의 접착 코드 없음

> ### 단점
* 구현이 장황
* 람다 표현식으로 인한 문법적 잡음이 DSL에 존재



---



## jOOQ

**jOOQ**(Java Object Oriented Querying) 은 자바 코드로 쿼리를 작성할 수 있는 데이터베이스 인터페이스이다.  

jOOQ DSL 을 구현하는 데 메서드 체인 패턴을 사용한다. 선택적 파라미터를 허용하고, 미리 정해진 순서로 특정 메서드가 호출될 수 있게 강제할 필요가 있기 때문이다. 

## 큐컴버

동작 주도 개발(Behavior-driven development)은 테스트 주도 개발의 확장으로 다양한 비즈니스 시나리오를 구조적으로 서술하는 간단한 도메인 전용 스크립팅 언어를 사용한다.   

큐컴버는 전제 조건 정의(Given), 시험하려는 도메인 객체의 실질 호출(When), 테스트 케이스의 결과를 확인하는 어설션(Then) 이렇게 세 가지로 구분되는 개념을 사용한다.  

**@Given**, **@When**, **@Then** 과 같은 어노테이션을 제거하고 람다를 사용하여 개발할 수 있다.  

## 스프링 통합

스프링 통합(Spring Integration)은 유명한 엔터프라이즈 통합 패턴을 지원할 수 있도록 의존성 주입에 기반한 스프링 프로그래밍 모델을 확장한다.  

스프링 통합 DSL 에서 가장 많이 사용되는 패턴은 메서드 체인이다. 특정한 빌더의 주요 목표인 전달되는 메시지 흐름을 만들고 데이터를 변환하는 기능에 적합하다.
